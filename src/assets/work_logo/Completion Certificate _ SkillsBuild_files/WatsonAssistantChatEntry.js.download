!function(t){"use strict";var e,n,o,r,a,i,s;function c(t,e){return t===e||t!=t&&e!=e}function u(t,e){for(var n=t.length;n--;)if(c(t[n][0],e))return n;return-1}t.MessageInputType=void 0,(e=t.MessageInputType||(t.MessageInputType={})).TEXT="text",e.EVENT="event",e.SKILL_COMPLETE="skill_complete",t.MessageResponseTypes=void 0,(n=t.MessageResponseTypes||(t.MessageResponseTypes={})).TEXT="text",n.OPTION="option",n.CONNECT_TO_AGENT="connect_to_agent",n.IMAGE="image",n.PAUSE="pause",n.USER_DEFINED="user_defined",n.IFRAME="iframe",n.VIDEO="video",n.AUDIO="audio",n.DATE="date",n.TABLE="table",n.INLINE_ERROR="inline_error",n.CARD="card",n.CAROUSEL="carousel",n.BUTTON="button",n.GRID="grid",t.OptionItemPreference=void 0,(o=t.OptionItemPreference||(t.OptionItemPreference={})).DROPDOWN="dropdown",o.BUTTON="button",t.IFrameItemDisplayOption=void 0,(r=t.IFrameItemDisplayOption||(t.IFrameItemDisplayOption={})).INLINE="inline",r.PANEL="panel",function(t){t.DEFAULT="default",t.SECONDARY="secondary",t.TERTIARY="tertiary",t.DANGER="danger",t.LINK="link"}(a||(a={})),function(t){t.POST_BACK="post_back",t.CUSTOM_EVENT="custom_event",t.SHOW_PANEL="show_panel",t.URL="url"}(i||(i={})),function(t){t.SMALL="small",t.MEDIUM="medium",t.LARGE="large"}(s||(s={}));var E=Array.prototype.splice;function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}l.prototype.clear=function(){this.__data__=[],this.size=0},l.prototype.delete=function(t){var e=this.__data__,n=u(e,t);return!(n<0)&&(n==e.length-1?e.pop():E.call(e,n,1),--this.size,!0)},l.prototype.get=function(t){var e=this.__data__,n=u(e,t);return n<0?void 0:e[n][1]},l.prototype.has=function(t){return u(this.__data__,t)>-1},l.prototype.set=function(t,e){var n=this.__data__,o=u(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this};var d="object"==typeof global&&global&&global.Object===Object&&global,p="object"==typeof self&&self&&self.Object===Object&&self,_=d||p||Function("return this")(),f=_.Symbol,T=Object.prototype,O=T.hasOwnProperty,I=T.toString,h=f?f.toStringTag:void 0;var A=Object.prototype.toString;var R="[object Null]",N="[object Undefined]",S=f?f.toStringTag:void 0;function g(t){return null==t?void 0===t?N:R:S&&S in Object(t)?function(t){var e=O.call(t,h),n=t[h];try{t[h]=void 0;var o=!0}catch(t){}var r=I.call(t);return o&&(e?t[h]=n:delete t[h]),r}(t):function(t){return A.call(t)}(t)}function b(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var y="[object AsyncFunction]",w="[object Function]",v="[object GeneratorFunction]",m="[object Proxy]";function C(t){if(!b(t))return!1;var e=g(t);return e==w||e==v||e==y||e==m}var D,L=_["__core-js_shared__"],P=(D=/[^.]+$/.exec(L&&L.keys&&L.keys.IE_PROTO||""))?"Symbol(src)_1."+D:"";var j=Function.prototype.toString;function U(t){if(null!=t){try{return j.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var M=/^\[object .+?Constructor\]$/,F=Function.prototype,G=Object.prototype,x=F.toString,B=G.hasOwnProperty,W=RegExp("^"+x.call(B).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function $(t){return!(!b(t)||(e=t,P&&P in e))&&(C(t)?W:M).test(U(t));var e}function H(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return $(n)?n:void 0}var Y=H(_,"Map"),k=H(Object,"create");var V=Object.prototype.hasOwnProperty;var Q=Object.prototype.hasOwnProperty;function z(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}function K(t,e){var n,o,r=t.__data__;return("string"==(o=typeof(n=e))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function X(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}z.prototype.clear=function(){this.__data__=k?k(null):{},this.size=0},z.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},z.prototype.get=function(t){var e=this.__data__;if(k){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return V.call(e,t)?e[t]:void 0},z.prototype.has=function(t){var e=this.__data__;return k?void 0!==e[t]:Q.call(e,t)},z.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=k&&void 0===e?"__lodash_hash_undefined__":e,this},X.prototype.clear=function(){this.size=0,this.__data__={hash:new z,map:new(Y||l),string:new z}},X.prototype.delete=function(t){var e=K(this,t).delete(t);return this.size-=e?1:0,e},X.prototype.get=function(t){return K(this,t).get(t)},X.prototype.has=function(t){return K(this,t).has(t)},X.prototype.set=function(t,e){var n=K(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this};function q(t){var e=this.__data__=new l(t);this.size=e.size}q.prototype.clear=function(){this.__data__=new l,this.size=0},q.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},q.prototype.get=function(t){return this.__data__.get(t)},q.prototype.has=function(t){return this.__data__.has(t)},q.prototype.set=function(t,e){var n=this.__data__;if(n instanceof l){var o=n.__data__;if(!Y||o.length<199)return o.push([t,e]),this.size=++n.size,this;n=this.__data__=new X(o)}return n.set(t,e),this.size=n.size,this};var J=function(){try{var t=H(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();function Z(t,e,n){"__proto__"==e&&J?J(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var tt=Object.prototype.hasOwnProperty;function et(t,e,n){var o=t[e];tt.call(t,e)&&c(o,n)&&(void 0!==n||e in t)||Z(t,e,n)}function nt(t){return null!=t&&"object"==typeof t}function ot(t){return nt(t)&&"[object Arguments]"==g(t)}var rt=Object.prototype,at=rt.hasOwnProperty,it=rt.propertyIsEnumerable,st=ot(function(){return arguments}())?ot:function(t){return nt(t)&&at.call(t,"callee")&&!it.call(t,"callee")},ct=Array.isArray;var ut="object"==typeof t&&t&&!t.nodeType&&t,Et=ut&&"object"==typeof module&&module&&!module.nodeType&&module,lt=Et&&Et.exports===ut?_.Buffer:void 0,dt=(lt?lt.isBuffer:void 0)||function(){return!1},pt=9007199254740991,_t=/^(?:0|[1-9]\d*)$/;function ft(t,e){var n=typeof t;return!!(e=null==e?pt:e)&&("number"==n||"symbol"!=n&&_t.test(t))&&t>-1&&t%1==0&&t<e}var Tt=9007199254740991;function Ot(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Tt}var It={};function ht(t){return function(e){return t(e)}}It["[object Float32Array]"]=It["[object Float64Array]"]=It["[object Int8Array]"]=It["[object Int16Array]"]=It["[object Int32Array]"]=It["[object Uint8Array]"]=It["[object Uint8ClampedArray]"]=It["[object Uint16Array]"]=It["[object Uint32Array]"]=!0,It["[object Arguments]"]=It["[object Array]"]=It["[object ArrayBuffer]"]=It["[object Boolean]"]=It["[object DataView]"]=It["[object Date]"]=It["[object Error]"]=It["[object Function]"]=It["[object Map]"]=It["[object Number]"]=It["[object Object]"]=It["[object RegExp]"]=It["[object Set]"]=It["[object String]"]=It["[object WeakMap]"]=!1;var At="object"==typeof t&&t&&!t.nodeType&&t,Rt=At&&"object"==typeof module&&module&&!module.nodeType&&module,Nt=Rt&&Rt.exports===At&&d.process,St=function(){try{var t=Rt&&Rt.require&&Rt.require("util").types;return t||Nt&&Nt.binding&&Nt.binding("util")}catch(t){}}(),gt=St&&St.isTypedArray,bt=gt?ht(gt):function(t){return nt(t)&&Ot(t.length)&&!!It[g(t)]},yt=Object.prototype.hasOwnProperty;function wt(t,e){var n=ct(t),o=!n&&st(t),r=!n&&!o&&dt(t),a=!n&&!o&&!r&&bt(t),i=n||o||r||a,s=i?function(t,e){for(var n=-1,o=Array(t);++n<t;)o[n]=e(n);return o}(t.length,String):[],c=s.length;for(var u in t)!e&&!yt.call(t,u)||i&&("length"==u||r&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||ft(u,c))||s.push(u);return s}var vt=Object.prototype;function mt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||vt)}function Ct(t,e){return function(n){return t(e(n))}}var Dt=Ct(Object.keys,Object),Lt=Object.prototype.hasOwnProperty;function Pt(t){return null!=t&&Ot(t.length)&&!C(t)}function jt(t){return Pt(t)?wt(t):function(t){if(!mt(t))return Dt(t);var e=[];for(var n in Object(t))Lt.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)}var Ut=Object.prototype.hasOwnProperty;function Mt(t){if(!b(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=mt(t),n=[];for(var o in t)("constructor"!=o||!e&&Ut.call(t,o))&&n.push(o);return n}function Ft(t){return Pt(t)?wt(t,!0):Mt(t)}var Gt="object"==typeof t&&t&&!t.nodeType&&t,xt=Gt&&"object"==typeof module&&module&&!module.nodeType&&module,Bt=xt&&xt.exports===Gt?_.Buffer:void 0,Wt=Bt?Bt.allocUnsafe:void 0;function $t(t,e){if(e)return t.slice();var n=t.length,o=Wt?Wt(n):new t.constructor(n);return t.copy(o),o}var Ht=Object.prototype.propertyIsEnumerable,Yt=Object.getOwnPropertySymbols,kt=Yt?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,o=null==t?0:t.length,r=0,a=[];++n<o;){var i=t[n];e(i,n,t)&&(a[r++]=i)}return a}(Yt(t),(function(e){return Ht.call(t,e)})))}:function(){return[]};var Vt=Ct(Object.getPrototypeOf,Object);function Qt(t){return function(t,e,n){var o=e(t);return ct(t)?o:function(t,e){for(var n=-1,o=e.length,r=t.length;++n<o;)t[r+n]=e[n];return t}(o,n(t))}(t,jt,kt)}var zt=H(_,"DataView"),Kt=H(_,"Promise"),Xt=H(_,"Set"),qt=H(_,"WeakMap"),Jt="[object Map]",Zt="[object Promise]",te="[object Set]",ee="[object WeakMap]",ne="[object DataView]",oe=U(zt),re=U(Y),ae=U(Kt),ie=U(Xt),se=U(qt),ce=g;(zt&&ce(new zt(new ArrayBuffer(1)))!=ne||Y&&ce(new Y)!=Jt||Kt&&ce(Kt.resolve())!=Zt||Xt&&ce(new Xt)!=te||qt&&ce(new qt)!=ee)&&(ce=function(t){var e=g(t),n="[object Object]"==e?t.constructor:void 0,o=n?U(n):"";if(o)switch(o){case oe:return ne;case re:return Jt;case ae:return Zt;case ie:return te;case se:return ee}return e});var ue=Object.prototype.hasOwnProperty;var Ee=_.Uint8Array;function le(t){var e=new t.constructor(t.byteLength);return new Ee(e).set(new Ee(t)),e}var de=/\w*$/;var pe=f?f.prototype:void 0,_e=pe?pe.valueOf:void 0;function fe(t,e){var n=e?le(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var Te="[object Boolean]",Oe="[object Date]",Ie="[object Map]",he="[object Number]",Ae="[object RegExp]",Re="[object Set]",Ne="[object String]",Se="[object Symbol]",ge="[object ArrayBuffer]",be="[object DataView]",ye="[object Float32Array]",we="[object Float64Array]",ve="[object Int8Array]",me="[object Int16Array]",Ce="[object Int32Array]",De="[object Uint8Array]",Le="[object Uint8ClampedArray]",Pe="[object Uint16Array]",je="[object Uint32Array]";function Ue(t,e,n){var o,r,a,i,s,c=t.constructor;switch(e){case ge:return le(t);case Te:case Oe:return new c(+t);case be:return s=le((i=t).buffer),new i.constructor(s,i.byteOffset,i.byteLength);case ye:case we:case ve:case me:case Ce:case De:case Le:case Pe:case je:return fe(t,n);case Ie:return new c;case he:case Ne:return new c(t);case Ae:return(a=new(r=t).constructor(r.source,de.exec(r))).lastIndex=r.lastIndex,a;case Re:return new c;case Se:return o=t,_e?Object(_e.call(o)):{}}}var Me=Object.create,Fe=function(){function t(){}return function(e){if(!b(e))return{};if(Me)return Me(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function Ge(t){return"function"!=typeof t.constructor||mt(t)?{}:Fe(Vt(t))}var xe=St&&St.isMap,Be=xe?ht(xe):function(t){return nt(t)&&"[object Map]"==ce(t)};var We=St&&St.isSet,$e=We?ht(We):function(t){return nt(t)&&"[object Set]"==ce(t)},He=1,Ye="[object Arguments]",ke="[object Function]",Ve="[object GeneratorFunction]",Qe="[object Object]",ze={};function Ke(t,e,n,o,r,a){var i,s=e&He;if(void 0!==i)return i;if(!b(t))return t;var c=ct(t);if(c)i=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&ue.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t);else{var u=ce(t),E=u==ke||u==Ve;if(dt(t))return $t(t,s);if(u==Qe||u==Ye||E&&!r)i=E?{}:Ge(t);else{if(!ze[u])return r?t:{};i=Ue(t,u,s)}}a||(a=new q);var l=a.get(t);if(l)return l;a.set(t,i),$e(t)?t.forEach((function(o){i.add(Ke(o,e,n,o,t,a))})):Be(t)&&t.forEach((function(o,r){i.set(r,Ke(o,e,n,r,t,a))}));var d=c?void 0:Qt(t);return function(t,e){for(var n=-1,o=null==t?0:t.length;++n<o&&!1!==e(t[n],n,t););}(d||t,(function(o,r){d&&(o=t[r=o]),et(i,r,Ke(o,e,n,r,t,a))})),i}ze[Ye]=ze["[object Array]"]=ze["[object ArrayBuffer]"]=ze["[object DataView]"]=ze["[object Boolean]"]=ze["[object Date]"]=ze["[object Float32Array]"]=ze["[object Float64Array]"]=ze["[object Int8Array]"]=ze["[object Int16Array]"]=ze["[object Int32Array]"]=ze["[object Map]"]=ze["[object Number]"]=ze[Qe]=ze["[object RegExp]"]=ze["[object Set]"]=ze["[object String]"]=ze["[object Symbol]"]=ze["[object Uint8Array]"]=ze["[object Uint8ClampedArray]"]=ze["[object Uint16Array]"]=ze["[object Uint32Array]"]=!0,ze["[object Error]"]=ze[ke]=ze["[object WeakMap]"]=!1;var Xe=1,qe=4;function Je(t,e,n){(void 0!==n&&!c(t[e],n)||void 0===n&&!(e in t))&&Z(t,e,n)}var Ze=function(t,e,n){for(var o=-1,r=Object(t),a=n(t),i=a.length;i--;){var s=a[++o];if(!1===e(r[s],s,r))break}return t};var tn="[object Object]",en=Function.prototype,nn=Object.prototype,on=en.toString,rn=nn.hasOwnProperty,an=on.call(Object);function sn(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function cn(t){return function(t,e,n,o){var r=!n;n||(n={});for(var a=-1,i=e.length;++a<i;){var s=e[a],c=void 0;void 0===c&&(c=t[s]),r?Z(n,s,c):et(n,s,c)}return n}(t,Ft(t))}function un(t,e,n,o,r,a,i){var s=sn(t,n),c=sn(e,n),u=i.get(c);if(u)Je(t,n,u);else{var E,l=a?a(s,c,n+"",t,e,i):void 0,d=void 0===l;if(d){var p=ct(c),_=!p&&dt(c),f=!p&&!_&&bt(c);l=c,p||_||f?ct(s)?l=s:nt(E=s)&&Pt(E)?l=function(t,e){var n=-1,o=t.length;for(e||(e=Array(o));++n<o;)e[n]=t[n];return e}(s):_?(d=!1,l=$t(c,!0)):f?(d=!1,l=fe(c,!0)):l=[]:function(t){if(!nt(t)||g(t)!=tn)return!1;var e=Vt(t);if(null===e)return!0;var n=rn.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&on.call(n)==an}(c)||st(c)?(l=s,st(s)?l=cn(s):b(s)&&!C(s)||(l=Ge(c))):d=!1}d&&(i.set(c,l),r(l,c,o,a,i),i.delete(c)),Je(t,n,l)}}function En(t,e,n,o,r){t!==e&&Ze(e,(function(a,i){if(r||(r=new q),b(a))un(t,e,i,n,En,o,r);else{var s=o?o(sn(t,i),a,i+"",t,e,r):void 0;void 0===s&&(s=a),Je(t,i,s)}}),Ft)}function ln(t){return t}var dn=Math.max;var pn=J?function(t,e){return J(t,"toString",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:ln,_n=Date.now;var fn,Tn,On,In=(fn=pn,Tn=0,On=0,function(){var t=_n(),e=16-(t-On);if(On=t,e>0){if(++Tn>=800)return arguments[0]}else Tn=0;return fn.apply(void 0,arguments)});function hn(t,e){return In(function(t,e,n){return e=dn(void 0===e?t.length-1:e,0),function(){for(var o=arguments,r=-1,a=dn(o.length-e,0),i=Array(a);++r<a;)i[r]=o[e+r];r=-1;for(var s=Array(e+1);++r<e;)s[r]=o[r];return s[e]=n(i),function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}(t,this,s)}}(t,e,ln),t+"")}var An,Rn,Nn,Sn,gn,bn,yn,wn,vn,mn,Cn,Dn,Ln,Pn,jn,Un=(An=function(t,e,n){En(t,e,n)},hn((function(t,e){var n=-1,o=e.length,r=o>1?e[o-1]:void 0,a=o>2?e[2]:void 0;for(r=An.length>3&&"function"==typeof r?(o--,r):void 0,a&&function(t,e,n){if(!b(n))return!1;var o=typeof e;return!!("number"==o?Pt(n)&&ft(e,n.length):"string"==o&&e in n)&&c(n[e],t)}(e[0],e[1],a)&&(r=o<3?void 0:r,o=1),t=Object(t);++n<o;){var i=e[n];i&&An(t,i,n,r)}return t})));!function(t){t.COMPLETE="complete",t.EDIT="edit",t.UPLOADING="uploading",t.SUCCESS="success"}(Rn||(Rn={})),function(t){t.LAUNCHER="launcher",t.MAIN_WINDOW="mainWindow",t.TOUR="tour"}(Nn||(Nn={})),function(t){t.DESKTOP="desktop",t.MOBILE="mobile"}(Sn||(Sn={})),function(t){t.CLOSE="close",t.MINIMIZE="minimize",t.SIDE_PANEL_LEFT="side-panel-left",t.SIDE_PANEL_RIGHT="side-panel-right"}(gn||(gn={})),function(t){t.LEFT="left",t.RIGHT="right"}(bn||(bn={})),function(t){t.WHITE="white",t.G10="g10",t.G90="g90",t.G100="g100"}(yn||(yn={})),function(t){t.INITIAL_CONFIG="INITIAL_CONFIG",t.OPEN_CONFIG="OPEN_CONFIG",t.MESSAGE_COMMUNICATION="MESSAGE_COMMUNICATION",t.RENDER="RENDER",t.IDENTITY_TOKEN="IDENTITY_TOKEN",t.MCSP_IDENTITY_TOKEN="MCSP_IDENTITY_TOKEN",t.INTEGRATION_ERROR="INTEGRATION_ERROR",t.AGENT_APP_EXPIRED_SESSION="AGENT_APP_EXPIRED_SESSION",t.HYDRATION="HYDRATION",t.PREVIEW_LINK_SECURITY="PREVIEW_LINK_SECURITY"}(wn||(wn={})),function(t){t.FAILED="FAILED",t.NO_SKILL="NO_SKILL",t.THROTTLED="THROTTLED",t.AGENT_APP_EXPIRED_SESSION="AGENT_APP_EXPIRED_SESSION"}(vn||(vn={})),function(t){t.NARROW="narrow",t.STANDARD="standard",t.WIDE="wide"}(mn||(mn={})),function(t){t[t.CLOSED=1]="CLOSED",t[t.OPEN_STRIKE=2]="OPEN_STRIKE",t[t.OPEN_FULL=3]="OPEN_FULL"}(Cn||(Cn={})),function(t){t[t.ALTERNATE_RESPONSES=1]="ALTERNATE_RESPONSES",t[t.CONTACT_OPTIONS=2]="CONTACT_OPTIONS",t[t.STARTERS=3]="STARTERS"}(Dn||(Dn={})),function(t){t.AI_TOOLTIP_AFTER_DESCRIPTION_ELEMENT="aiTooltipAfterDescriptionElement",t.WELCOME_NODE_BEFORE_ELEMENT="welcomeNodeBeforeElement",t.HEADER_BOTTOM_ELEMENT="headerBottomElement",t.BEFORE_INPUT_ELEMENT="beforeInputElement",t.HOME_SCREEN_BEFORE_INPUT_ELEMENT="homeScreenBeforeInputElement",t.HOME_SCREEN_AFTER_STARTERS_ELEMENT="homeScreenAfterStartersElement",t.HOME_SCREEN_HEADER_BOTTOM_ELEMENT="homeScreenHeaderBottomElement",t.CUSTOM_PANEL_ELEMENT="customPanelElement"}(Ln||(Ln={})),function(t){t.MESSAGE="message",t.HOME_SCREEN="homeScreen"}(Pn||(Pn={})),function(t){t.ROUND="round",t.SQUARE="square"}(jn||(jn={}));const Mn="[Chat]";var Fn;!function(t){t.PRIMARY="primary",t.ACCENT="accent"}(Fn||(Fn={}));let Gn=!1;try{process?.env.JEST_WORKER_ID&&(Gn=!0)}catch(t){}async function xn(t){await new Promise((e=>{setTimeout(e,t)}))}function Bn(t,e,n){const o=new Promise(((t,o)=>{setTimeout((()=>{o(n||`The operation timed out after ${e}ms`)}),e)}));return Promise.race([t,o])}function Wn(t,...e){console.error(`${Mn} ${t}`,...e)}function $n(t,...e){console.debug(`${Mn} ${t}`,...e)}function Hn(t,...e){console.warn(`${Mn} ${t}`,...e)}async function Yn(t){try{if(t)return await t.text()}catch(t){Wn("Error getting fetch text",t)}}async function kn(t){try{if(t)return Bn(t.text(),2e3,"Getting response text")}catch(t){Wn("Error getting fetch text",t)}}function Vn(){window.watsonAssistantChatSharedConfig=window.watsonAssistantChatSharedConfig||{},window.watsonAssistantChatSharedConfig.namespaces=window.watsonAssistantChatSharedConfig.namespaces||[],window.watsonAssistantChatSharedConfig.loadScriptPromises=window.watsonAssistantChatSharedConfig.loadScriptPromises||{}}function Qn(){return window.watsonAssistantChatSharedConfig}function zn(t){return t?t.trim():""}function Kn(t,e){Vn();const n=zn(t);if(Qn().namespaces.includes(n)){Wn(`You have multiple web chats attempting to use the same namespace. (${n||"No namespace provided"})`)}else!function(t){Vn();const e=zn(t),{namespaces:n}=Qn();n.push(e)}(t)}var Xn,qn,Jn,Zn;!function(t){t.APP="app",t.ASSISTANT="assistant"}(Xn||(Xn={})),function(t){t.WEB_CHAT_SETTINGS="web-chat-settings",t.ASSISTANT_PREVIEW="assistant-preview",t.PREVIEW_LINK="preview-link",t.ACTIONS="actions",t.SEARCH="search",t.ANALYTICS="analytics"}(qn||(qn={})),function(t){t.ERROR_MISSING="error",t.WARN_MISSING="warning",t.PREVIEW="preview"}(Jn||(Jn={})),function(t){t.DESKTOP="desktop",t.MOBILE="mobile"}(Zn||(Zn={}));const to={openChatByDefault:!1,showLauncher:!0,shouldTakeFocusIfOpensAutomatically:!0,agentAppConfig:{is_on:!1},servers:{},serviceDesk:{},messaging:{copyPreviousContextOnRequest:!0},__ibm__:{isTrackingEnabled:!0,logTrackObjects:!1,connectToAgentBehavior:Jn.ERROR_MISSING,enableFeatures:{}},wxo:{}};async function eo(t,e,n,o,r,a){const i=Date.now();let s=Ke(t,Xe|qe);s?.debug&&$n("[ChatEntry] Called instantiateWidget",s),"https:"!==document.location.protocol&&Hn('Your page is not running with "https"; your data will not be sent  securely.'),"CSS1Compat"!==document.compatMode&&Hn('Your page is running in quirks mode; you may experience layout issues with the chat. Add "<!DOCTYPE html>" to the page to run in standards mode.');const{element:c,onLoad:u,onError:E,...l}=s,d=await n(l),p={loadVersion:"CarbonChatEntry",onError:E,fetch:e,loadStartTime:i,asCarbonChat:r,renderOverride:a};return Kn(s.namespace),new d(l,o,c,p)}function no(){return t=window.fetch.bind(window),async(...e)=>{const n=await t(...e),o=n.text.bind(n);let r=oo;return n.text=async()=>(r===oo&&(r=await o()),r),n.json=async()=>{const t=await n.text();return JSON.parse(t)},n};var t}const oo={};function ro(){let t,e;const n=new Promise(((n,o)=>{t=n,e=o}));return n.doResolve=e=>{n.isResolved=!0,n.isComplete=!0,t(e)},n.doReject=t=>{n.isRejected=!0,n.isComplete=!0,e(t)},n.isResolved=!1,n.isRejected=!1,n.isComplete=!1,n}const ao="8.11.0";function io(t){return t.__ibm__?.useExactVersion?t.clientVersion:ao}function so(t){Vn();const e=t.clientVersion||ao,{requestedVersion:n}=Qn();if(n){if(n!==e)return!0}else!function(t){window.watsonAssistantChatSharedConfig.requestedVersion=t}(e);return!1}const co="8.11.0",uo="https://web-chat.global.assistant.watson.appdomain.cloud";async function Eo(t,e,n,o){return Bn(async function(t,e,n){let o=1;for(;o-1<=e.length;){try{return await t(o)}catch(t){if(o-1===e.length)throw Wn(`The operation "${n}" failed after ${o} attempts and will not be retried.`,t),t;{const r=e[o-1];Wn(`The operation "${n}" failed after ${o} attempts will be retried in ${r}ms.`,t),await xn(r)}}o++}throw new Error(`Unexpected retry state for operation "${n}".`)}(t,e,n),o)}var lo,po,_o,fo,To;!function(t){t.WHITE="cds--white",t.G10="cds--g10",t.G90="cds--g90",t.G100="cds--g100"}(lo||(lo={})),function(t){t.PRIMARY="primary",t.SECONDARY="secondary",t.DANGER="danger",t.GHOST="ghost",t.DANGER_PRIMARY="danger--primary",t.DANGER_GHOST="danger--ghost",t.DANGER_TERTIARY="danger--tertiary",t.TERTIARY="tertiary"}(po||(po={})),function(t){t.SMALL="sm",t.MEDIUM="md",t.LARGE="lg",t.XLARGE="xl",t.XXLARGE="2xl"}(_o||(_o={})),function(t){t.START="start",t.CENTER="center",t.END="end"}(fo||(fo={})),function(t){t.TEXT_NOTIFICATION="text_notification"}(To||(To={}));function Oo(t){return Object.freeze(t),Object.getOwnPropertyNames(t).forEach((e=>{!Object.prototype.hasOwnProperty.call(t,e)||null===t[e]||"object"!=typeof t[e]&&"function"!=typeof t[e]||Object.isFrozen(t[e])||Oo(t[e])})),t}const Io={config:{is_on:!0,mobile:{is_on:!0,title:"",time_to_expand:15e3,new_expand_time:!1,time_to_reduce:1e4,notification_type:To.TEXT_NOTIFICATION},desktop:{is_on:!0,title:"",new_expand_time:!1,time_to_expand:15e3,notification_type:To.TEXT_NOTIFICATION}}};Oo(Io);const ho={title:null,hideBackButton:!1,hidePanelHeader:!1,disableAnimation:!1};Oo(ho);Oo({isOpen:!1,panelID:"wac-default-panel",options:ho});Oo({isOpen:!1,messageItem:null});Oo({isOpen:!1,citationItem:null,relatedSearchResult:null});const Ao={config:{is_on:!1},isOpen:!1,showBanner:!0};Oo(Ao);Oo({activeTourStepItems:null});Oo({isOpen:!1,localMessageItem:null,isMessageForInput:!1});const Ro={showButton:!1,allowCollapse:!1,panelState:Cn.CLOSED,config:{is_on:!1},contactItem:null,starters:null,suggestionListItems:null,showSearchSection:!1,searchResults:null,searchResultsLoading:!1,searchResultsText:null};Oo(Ro);const No={launcher:!1,mainWindow:!1,tour:!1};Oo(No);Oo({launcher:!0,mainWindow:!1,tour:!1});Oo({mainWindow:!0,launcher:!1,tour:!1});Oo({tour:!0,mainWindow:!1,launcher:!1});Oo({chatState:{version:ao,sessionID:null,sessionStartedTimestamp:null,updateHistoryUserDefinedCount:{},disclaimersAccepted:{},homeScreenState:{isHomeScreenOpen:!1,showBackToBot:!1},hasSentNonWelcomeMessage:!1,suggestionsPersistedState:{numStrikes:0,selectedIndex:-1,selectedSection:null},persistedTourState:{activeTourID:null,activeTourCurrentStepIndex:null},agentState:{isConnected:!1,isSuspended:!1,agentProfiles:{}}},launcherState:{wasLoadedFromBrowser:!1,version:ao,viewState:No,activeTour:!1,showUnreadIndicator:!1,mobileLauncherIsExtended:!1,mobileLauncherWasReduced:!1,mobileLauncherDisableBounce:!1,desktopLauncherIsExpanded:!1,desktopLauncherWasMinimized:!1,bounceTurn:1,hasSentNonWelcomeMessage:!1}});const So={localMessageIDs:[],messageIDs:[],isTypingCounter:0,isLoadingCounter:0,isHydratingCounter:0,isScrollAnchored:!1};Oo(So);Oo({allMessageItemsByID:{},allMessagesByID:{},botMessageState:{...So}});Oo({isConnecting:!1,isReconnecting:!1,numUnreadMessages:0,fileUploadInProgress:!1,showScreenShareRequest:!1,isScreenSharing:!1,isAgentTyping:!1,inputState:{fieldVisible:!0,isReadonly:!1,files:[],allowFileUploads:!1,allowMultipleFileUploads:!1,allowedFileUploadTypes:null,stopStreamingButtonState:{currentStreamID:null,isVisible:!1,isDisabled:!1}}});Oo({carbonTheme:yn.G10,useAITheme:!1,corners:jn.ROUND});Oo({carbon_theme:yn.G10,use_ai_theme:!1});Oo({enabled:!1});Oo({is_on:!1});var go;Oo({showFrame:!0,hasContentMaxWidth:!1}),function(t){t.NONE="none",t.SOLID="solid",t.TOP_CORNER_OUT="top_corner_out",t.BOTTOM_UP="bottom_up"}(go||(go={}));var bo;!function(t){t[t.CONTINUE=100]="CONTINUE",t[t.SWITCHING_PROTOCOLS=101]="SWITCHING_PROTOCOLS",t[t.PROCESSING=102]="PROCESSING",t[t.EARLY_HINTS=103]="EARLY_HINTS",t[t.OK=200]="OK",t[t.CREATED=201]="CREATED",t[t.ACCEPTED=202]="ACCEPTED",t[t.NON_AUTHORITATIVE_INFORMATION=203]="NON_AUTHORITATIVE_INFORMATION",t[t.NO_CONTENT=204]="NO_CONTENT",t[t.RESET_CONTENT=205]="RESET_CONTENT",t[t.PARTIAL_CONTENT=206]="PARTIAL_CONTENT",t[t.MULTI_STATUS=207]="MULTI_STATUS",t[t.MULTIPLE_CHOICES=300]="MULTIPLE_CHOICES",t[t.MOVED_PERMANENTLY=301]="MOVED_PERMANENTLY",t[t.MOVED_TEMPORARILY=302]="MOVED_TEMPORARILY",t[t.SEE_OTHER=303]="SEE_OTHER",t[t.NOT_MODIFIED=304]="NOT_MODIFIED",t[t.USE_PROXY=305]="USE_PROXY",t[t.TEMPORARY_REDIRECT=307]="TEMPORARY_REDIRECT",t[t.PERMANENT_REDIRECT=308]="PERMANENT_REDIRECT",t[t.BAD_REQUEST=400]="BAD_REQUEST",t[t.UNAUTHORIZED=401]="UNAUTHORIZED",t[t.PAYMENT_REQUIRED=402]="PAYMENT_REQUIRED",t[t.FORBIDDEN=403]="FORBIDDEN",t[t.NOT_FOUND=404]="NOT_FOUND",t[t.METHOD_NOT_ALLOWED=405]="METHOD_NOT_ALLOWED",t[t.NOT_ACCEPTABLE=406]="NOT_ACCEPTABLE",t[t.PROXY_AUTHENTICATION_REQUIRED=407]="PROXY_AUTHENTICATION_REQUIRED",t[t.REQUEST_TIMEOUT=408]="REQUEST_TIMEOUT",t[t.CONFLICT=409]="CONFLICT",t[t.GONE=410]="GONE",t[t.LENGTH_REQUIRED=411]="LENGTH_REQUIRED",t[t.PRECONDITION_FAILED=412]="PRECONDITION_FAILED",t[t.REQUEST_TOO_LONG=413]="REQUEST_TOO_LONG",t[t.REQUEST_URI_TOO_LONG=414]="REQUEST_URI_TOO_LONG",t[t.UNSUPPORTED_MEDIA_TYPE=415]="UNSUPPORTED_MEDIA_TYPE",t[t.REQUESTED_RANGE_NOT_SATISFIABLE=416]="REQUESTED_RANGE_NOT_SATISFIABLE",t[t.EXPECTATION_FAILED=417]="EXPECTATION_FAILED",t[t.IM_A_TEAPOT=418]="IM_A_TEAPOT",t[t.INSUFFICIENT_SPACE_ON_RESOURCE=419]="INSUFFICIENT_SPACE_ON_RESOURCE",t[t.METHOD_FAILURE=420]="METHOD_FAILURE",t[t.MISDIRECTED_REQUEST=421]="MISDIRECTED_REQUEST",t[t.UNPROCESSABLE_ENTITY=422]="UNPROCESSABLE_ENTITY",t[t.LOCKED=423]="LOCKED",t[t.FAILED_DEPENDENCY=424]="FAILED_DEPENDENCY",t[t.UPGRADE_REQUIRED=426]="UPGRADE_REQUIRED",t[t.PRECONDITION_REQUIRED=428]="PRECONDITION_REQUIRED",t[t.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",t[t.REQUEST_HEADER_FIELDS_TOO_LARGE=431]="REQUEST_HEADER_FIELDS_TOO_LARGE",t[t.UNAVAILABLE_FOR_LEGAL_REASONS=451]="UNAVAILABLE_FOR_LEGAL_REASONS",t[t.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",t[t.NOT_IMPLEMENTED=501]="NOT_IMPLEMENTED",t[t.BAD_GATEWAY=502]="BAD_GATEWAY",t[t.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",t[t.GATEWAY_TIMEOUT=504]="GATEWAY_TIMEOUT",t[t.HTTP_VERSION_NOT_SUPPORTED=505]="HTTP_VERSION_NOT_SUPPORTED",t[t.INSUFFICIENT_STORAGE=507]="INSUFFICIENT_STORAGE",t[t.NETWORK_AUTHENTICATION_REQUIRED=511]="NETWORK_AUTHENTICATION_REQUIRED"}(bo||(bo={}));class yo extends Error{}yo.prototype.name="InvalidTokenError";const wo="token provided is malformed",vo="Authorization header provided but does not follow JWT format",mo="token expired";var Co;!function(t){t[t.MISCELLANEOUS=1]="MISCELLANEOUS",t[t.LOCAL_MESSAGE=2]="LOCAL_MESSAGE",t[t.MESSAGE=3]="MESSAGE",t[t.COMPONENT=4]="COMPONENT",t[t.USER=6]="USER",t[t.DEVICE_ID=8]="DEVICE_ID",t[t.FILE=9]="FILE"}(Co||(Co={}));const Do={dev:"integrations.us-south.assistant.dev.watson.appdomain.cloud",staging:"integrations.us-south.assistant.test.watson.appdomain.cloud","us-south":"integrations.us-south.assistant.watson.appdomain.cloud","us-east":"integrations.us-east.assistant.watson.appdomain.cloud","jp-tok":"integrations.jp-tok.assistant.watson.appdomain.cloud","au-syd":"integrations.au-syd.assistant.watson.appdomain.cloud","eu-gb":"integrations.eu-gb.assistant.watson.appdomain.cloud","eu-de":"integrations.eu-de.assistant.watson.appdomain.cloud","kr-seo":"integrations.kr-seo.assistant.watson.appdomain.cloud","aws-dev":"integrations.aws-us-east-1.assistant.dev.watson.appdomain.cloud","aws-staging":"integrations.aws-us-east-1.assistant.test.watson.appdomain.cloud","aws-us-east-1":"integrations.aws-us-east-1.assistant.watson.appdomain.cloud","aws-preprod":"integrations.aws-us-east-1.assistant.preprod.watson.appdomain.cloud","aws-eu-central-1":"integrations.aws-eu-central-1.assistant.watson.appdomain.cloud","aws-ap-southeast-1":"integrations.aws-ap-southeast-1.assistant.watson.appdomain.cloud","aws-ap-south-1":"integrations.aws-ap-south-1.assistant.watson.appdomain.cloud","wxo-dev":"integrations.us-south.assistant-builder.dev.watson.appdomain.cloud","wxo-staging":"integrations.us-south.assistant-builder.test.watson.appdomain.cloud","wxo-us-south":"integrations.us-south.assistant-builder.watson.appdomain.cloud","wxo-us-east":"integrations.us-east.assistant-builder.watson.appdomain.cloud","wxo-eu-gb":"integrations.eu-gb.assistant-builder.watson.appdomain.cloud","wxo-ca-tor":"integrations.ca-tor.assistant-builder.watson.appdomain.cloud","wxo-eu-de":"integrations.eu-de.assistant-builder.watson.appdomain.cloud","wxo-jp-tok":"integrations.jp-tok.assistant-builder.watson.appdomain.cloud","wxo-au-syd":"integrations.au-syd.assistant-builder.watson.appdomain.cloud"};const Lo="chat";function Po(t){const{integrationID:e,region:n,__ibm__:o=to.__ibm__,messaging:r}=t;if(!o.customMessageURL&&!r?.customSendMessage){if("string"!=typeof(a=e)||null===a.match(/^[0-9a-f]{8}-?[0-9a-f]{4}-?[0-9a-f]{4}-?[0-9a-f]{4}-?[0-9a-f]{12}$/i))throw new Error(`${Mn} The value of integrationID "${e}" is not a valid ID.`);if(!n)throw new Error(`${Mn} You failed to provide a region in your config object.`);if(!Do[n])throw new Error(`${Mn} The region "${n}" you provided in your config object is not a valid region.`)}var a;if(so(t))throw new Error(`${Mn} You cannot load web chats of different versions on the same page.`);t.__ibm__?.skipConfig&&(Hn("IBM skipConfig is deprecated. Use servers.skipConfig."),t.servers=t.servers||{},t.servers.skipConfig=!0),t.__ibm__?.overrideRemoteInitConfig&&(Hn("IBM overrideRemoteInitConfig is deprecated. Use servers.initConfig."),t.servers=t.servers||{},t.servers.initConfig=t.__ibm__.overrideRemoteInitConfig)}function jo(t){const e=function(t){return Do[t.region]}(t);return`${t.servers?.assistantURLPrefix||`https://${e}`}/${t.subscriptionID||"public"}`}function Uo(t){return t?.servers?.webChatScriptPrefix?t.servers.webChatScriptPrefix:t?.cloudPrivateHostURL?`${t.cloudPrivateHostURL.replace(/\/?$/,"/")}static/webchat`:uo}function Mo(t,e){const n=t.__ibm__?.customInitConfigURL;if(n)return n;const o=function(t,e){let n=null;if(t.cloudPrivateHostURL){const e=Lo;n=`${t.cloudPrivateHostURL.replace(/\/?$/,"/")}v1/${e}/${t.integrationID}`}return n}(t);if(o)return`${o}/config?type=init`;const r=jo(t),a="?type=init";return t.agentAppConfig?.is_on?`${r}/agentapp/${t.integrationID}/config${a}`:`${r}/chat/${t.integrationID}/config${a}`}async function Fo(t,e,n,o){const r=await e(t,o);if(!r.ok){if(r.status===bo.TOO_MANY_REQUESTS)return null;const t=await Yn(r);if(function(t,e,n){return t===bo.FORBIDDEN&&e||t===bo.BAD_REQUEST&&n?.includes(wo)||t===bo.BAD_REQUEST&&n?.includes(vo)||t===bo.UNAUTHORIZED&&n?.includes(mo)}(r.status,n,t))return r;throw r}return r}async function Go(t,e,n){if(t.servers?.skipConfig)return{botName:"watsonx Assistant"};const o=Mo(t);let r;try{r=await Eo((()=>Fo(o,n,!1,undefined)),[100,1e3,2e3,5e3],"fetch init config",15e4)}catch(t){if(e)throw e({errorType:wn.INITIAL_CONFIG,message:"The init configuration data could not be loaded.",errorCode:t?.status||void 0,otherData:await kn(t)}),new Error(`${Mn} The init configuration data could not be loaded.`)}if(!r)throw new Error(`${Mn} The init configuration data could not be loaded.`);const a=await Yn(r);if(!r.ok){const n=`The configuration for integrationID "${t.integrationID}" requires a valid identityToken. The chat widget will not be displayed.`;throw e&&e({errorType:wn.INITIAL_CONFIG,message:"The init configuration data could not be loaded (JWT retry).",errorCode:r.status||void 0,otherData:a}),Wn(n),new Error(`${Mn}  ${n}`)}const i=a?JSON.parse(a):{};if(i.botName=i.botName||"watsonx Assistant",t.__ibm__?.toolingType===qn.PREVIEW_LINK&&i.authorization?.is_on)throw e&&e({errorType:wn.PREVIEW_LINK_SECURITY,message:"Web chat security is enabled which is not supported by the preview link."}),new Error(`${Mn} Web chat security is enabled which is not supported by the preview link.`);return i}let xo;function Bo(t){try{if(t){const e=window.sessionStorage?.getItem("IBM_WAC_CONFIG_OVERRIDE");if(e){const n=JSON.parse(e);Hn("Applying local config override",n),Un(t,n)}}}catch(t){Wn("Error trying to apply session overrides",t)}}async function Wo(t){Bo(t),t?.debug&&$n("[WatsonAssistantChatEntry] Called loadWatsonAssistantChat()",t),Po(t);const e=await Go(t,t.onError,no());return Ho(await eo(t,no(),xo,e),t)}const $o={};function Ho(t,e){return new Promise(((n,o)=>{async function r(){try{const o=await t.start();e.orchestrateUIAgentExtensions&&(await async function(t){const e=io(t);return $o[co]?$o[co]:($o[co]=ro(),new Promise(((n,o)=>{const r=`${Uo(t)}/versions/${e}`,a=document.createElement("script");a.type="module",a.onload=async()=>{$o[co].doResolve(),n()},a.onerror=t=>{o(t)},a.src=`${r}/uiAgentExtensions.js`,document.head.appendChild(a)})))}(e),window.nocodeui.bootstrap(o)),n(o)}catch(t){o(t)}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",r):r()}))}(function(t){xo=t;const e=window.watsonAssistantChatOptions;Bo(e);const n=e?.debug;n&&$n("[WatsonAssistantChatEntry] Starting."),e?e.onLoad?(n&&$n("[WatsonAssistantChatEntry] Using publicConfig.onLoad."),async function(){const t=window.watsonAssistantChatOptions;t?.debug&&$n("[WatsonAssistantChatEntry] Called loadWatsonAssistantChatWithOnLoad",t);const e=t.onLoad;Po(t);const n=await Go(t,t.onError,no());eo(t,no(),xo,n).then((e=>Ho(e,t))).then(e)}()):n&&Hn("[WatsonAssistantChatEntry] No onLoad found in public config."):n&&$n("[WatsonAssistantChatEntry] No window.watsonAssistantChatOptions found."),window.loadWatsonAssistantChat=Wo})((async function(t){const e=io(t),{loadScriptPromises:n}=Qn();return n[co]?n[co]:(n[co]=ro(),new Promise(((o,r)=>{const a=`${Uo(t)}/versions/${e}`,i=document.createElement("script");i.onload=async()=>{const t=await n[co];o(t)},i.onerror=t=>{r(t)},i.src=`${a}/chat.js`,document.head.appendChild(i)})))}))}({});
//# sourceMappingURL=WatsonAssistantChatEntry.js.map
